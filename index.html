<!DOCTYPE html>
<html lang="ru" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Markdown2PDF Pro</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
  <style>
    :root {
      --bg-primary: #1a1f2b;
      --bg-secondary: #222837;
      --bg-panel: #252b3a;
      --bg-toolbar: #2d3445;
      --border-color: #3a4154;
      --text-primary: #e6e9f0;
      --text-secondary: #a0a8bc;
      --accent-color: #4d9de0;
      --accent-hover: #3a85c9;
      --preview-bg: #ffffff;
      --preview-text: #1a1f2b;
      --code-bg: #2d3445;
      --code-border: #3a4154;
      --success-color: #10b981;
      --error-color: #ef4444;
      --warning-color: #f59e0b;
      --quote-color: #a0a8bc;
      --search-bg: #2a3141;
      --search-border: #4a5265;
      --theme-icon: #ffc107;
      --notification-shadow: 0 4px 12px rgba(0,0,0,0.25);
      --panel-shadow: 0 4px 20px rgba(0, 0, 0, 0.25);
      --modal-shadow: 0 12px 30px rgba(0, 0, 0, 0.4);
      --dot-bg: #e3f2fd;
      --dot-border: #2c7be5;
    }
    :root[data-theme="light"] {
      --bg-primary: #f8f9fa;
      --bg-secondary: #e9ecef;
      --bg-panel: #ffffff;
      --bg-toolbar: #f1f3f5;
      --border-color: #dee2e6;
      --text-primary: #212529;
      --text-secondary: #495057;
      --accent-color: #2c7be5;
      --accent-hover: #2463c2;
      --preview-bg: #ffffff;
      --preview-text: #212529;
      --code-bg: #f8f9fa;
      --code-border: #dee2e6;
      --success-color: #10b981;
      --error-color: #ef4444;
      --warning-color: #f59e0b;
      --quote-color: #6c757d;
      --search-bg: #ffffff;
      --search-border: #ced4da;
      --theme-icon: #6c757d;
      --notification-shadow: 0 4px 12px rgba(0,0,0,0.1);
      --panel-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      --modal-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
      --dot-bg: #f0f7ff;
      --dot-border: #2c7be5;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { height: 100%; overflow: hidden; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
      background-color: var(--bg-primary);
      color: var(--text-primary);
      display: flex;
      flex-direction: column;
      transition: background-color 0.3s ease;
      line-height: 1.5;
    }
    .header {
      background-color: var(--bg-toolbar);
      border-bottom: 1px solid var(--border-color);
      padding: 0.8rem 1.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-shrink: 0;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }
    .header-title {
      font-size: 1.4rem;
      font-weight: 700;
      color: var(--accent-color);
      display: flex;
      align-items: center;
      gap: 0.8rem;
    }
    .header-buttons { display: flex; gap: 0.8rem; }
    .header-btn {
      background: rgba(255,255,255,0.08);
      border: 1px solid var(--border-color);
      color: var(--text-primary);
      padding: 0.5rem 1rem;
      border-radius: 8px;
      font-size: 0.95rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.6rem;
      transition: all 0.2s;
    }
    .header-btn:hover {
      background: rgba(77,157,224,0.25);
      border-color: var(--accent-color);
      color: var(--accent-color);
    }
    .theme-toggle-btn {
      width: 42px;
      height: 42px;
      border-radius: 10px;
      background: var(--bg-toolbar);
      border: 1px solid var(--border-color);
      color: var(--theme-icon);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 1.1rem;
      transition: all 0.25s;
    }
    .theme-toggle-btn:hover {
      background: var(--accent-color);
      color: white;
      transform: rotate(15deg);
    }
    .main-container {
      flex: 1;
      display: flex;
      padding: 1rem;
      gap: 1rem;
      overflow: hidden;
    }
    .content-area {
      display: flex;
      width: 100%;
      height: 100%;
      gap: 1rem;
    }
    .panel {
      background: var(--bg-panel);
      border: 1px solid var(--border-color);
      border-radius: 12px;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      flex: 1;
      box-shadow: var(--panel-shadow);
    }
    .toolbar {
      background: var(--bg-toolbar);
      border-bottom: 1px solid var(--border-color);
      padding: 0.7rem 1rem;
      display: flex;
      gap: 0.7rem;
      flex-wrap: wrap;
      justify-content: space-between;
    }
    .toolbar-left, .toolbar-right {
      display: flex;
      gap: 0.7rem;
      flex-wrap: wrap;
      align-items: center;
    }
    .tool-btn {
      background: rgba(255,255,255,0.08);
      border: 1px solid var(--border-color);
      color: var(--text-primary);
      padding: 0.45rem 0.9rem;
      border-radius: 8px;
      cursor: pointer;
      font-size: 0.9rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      min-width: 85px;
      transition: all 0.2s;
    }
    .tool-btn:hover {
      background: rgba(77,157,224,0.25);
      border-color: var(--accent-color);
      color: var(--accent-color);
    }
    .tool-btn.danger {
      background: rgba(229,115,115,0.15);
      border-color: #d32f2f;
      color: #ffcdd2;
    }
    .tool-btn.danger:hover {
      background: rgba(211,47,47,0.25);
      border-color: #c62828;
      color: white;
    }
    .editor {
      flex: 1;
      padding: 1.4rem;
      font-family: 'Consolas', monospace;
      font-size: 15px;
      line-height: 1.6;
      resize: none;
      background: var(--bg-primary);
      color: var(--text-primary);
      border: none;
      outline: none;
      caret-color: var(--accent-color);
      overflow: auto;
    }
    .preview-header {
      background: var(--bg-toolbar);
      border-bottom: 1px solid var(--border-color);
      padding: 0.8rem 1.2rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 0.8rem;
    }
    .font-size-control { display: flex; align-items: center; gap: 0.8rem; }
    .font-size-control label {
      font-size: 0.95rem;
      color: var(--text-secondary);
      font-weight: 500;
    }
    .font-size-select {
      background: var(--bg-primary);
      border: 1px solid var(--border-color);
      color: var(--text-primary);
      padding: 0.4rem 0.7rem;
      border-radius: 6px;
      font-size: 0.95rem;
      min-width: 75px;
    }
    .document-input-group {
      display: flex;
      align-items: center;
      background: var(--bg-primary);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      overflow: hidden;
    }
    .document-input-group input {
      background: transparent;
      border: none;
      color: var(--text-primary);
      padding: 0.5rem 0.9rem;
      font-size: 1rem;
      outline: none;
      width: 160px;
      font-weight: 500;
    }
    .document-extension {
      color: var(--text-secondary);
      padding: 0.5rem 0.9rem;
      font-size: 1rem;
      border-left: 1px solid var(--border-color);
      min-width: 45px;
      text-align: center;
    }
    .download-btn {
      background: linear-gradient(45deg, var(--accent-color), #3a85c9);
      color: white;
      border: none;
      padding: 0.55rem 1.3rem;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.7rem;
      font-weight: 600;
      min-width: 120px;
      transition: all 0.25s;
    }
    .download-btn:hover {
      background: linear-gradient(45deg, var(--accent-hover), #2a75b5);
      transform: translateY(-1px);
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    .preview {
      flex: 1;
      padding: 1.5rem;
      overflow: auto;
      display: flex;
      align-items: flex-start;
      justify-content: center;
      background: var(--bg-secondary);
    }
    .preview-content {
      background: var(--preview-bg);
      color: var(--preview-text);
      padding: 2.5rem;
      line-height: 1.7;
      font-size: 15px;
      border-radius: 14px;
      box-shadow: 0 6px 30px rgba(0,0,0,0.1);
      width: 80%;
      max-width: 850px;
      min-width: 320px;
      position: relative;
    }
    .preview-content::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--accent-color), #6cb4ee);
      border-radius: 14px 14px 0 0;
    }
    .preview-content h1 {
      font-size: 2.3em;
      margin-bottom: 0.6em;
      border-bottom: 2px solid #eee;
      padding-bottom: 0.4em;
      font-weight: 700;
      line-height: 1.2;
      color: #1a1f2b;
    }
    .preview-content h2 {
      font-size: 1.8em;
      margin: 1.3em 0 0.7em;
      font-weight: 600;
      color: #2c3e50;
    }
    .preview-content h3 {
      font-size: 1.45em;
      margin: 1.1em 0 0.6em;
      font-weight: 600;
      color: #2c3e50;
    }
    .preview-content p { margin: 1em 0; line-height: 1.7; }
    .preview-content ul, .preview-content ol {
      padding-left: 2rem;
      margin: 1.2rem 0;
    }
    .preview-content li { margin-bottom: 0.6rem; line-height: 1.65; }
    .preview-content blockquote {
      border-left: 4px solid var(--accent-color);
      padding-left: 1.4rem;
      color: var(--quote-color);
      font-style: italic;
      margin: 1.6rem 0;
      background: rgba(77,157,224,0.06);
      padding: 1.1rem 1.4rem;
      border-radius: 0 8px 8px 0;
      position: relative;
    }
    .preview-content blockquote::before {
      content: """;
      position: absolute;
      left: -10px;
      top: -5px;
      font-size: 4rem;
      color: rgba(77,157,224,0.15);
      font-family: Georgia, serif;
      line-height: 1;
    }
    .preview-content code:not(pre code) {
      background: var(--code-bg);
      border: 1px solid var(--code-border);
      border-radius: 4px;
      padding: 0.25rem 0.5rem;
      font-family: monospace;
      font-size: 0.95em;
      color: #e06c75;
    }
    .preview-content pre {
      background: var(--code-bg);
      border: 1px solid var(--code-border);
      border-radius: 10px;
      padding: 1.4rem;
      margin: 1.6rem 0;
      overflow-x: auto;
      font-family: monospace;
      font-size: 0.95em;
      line-height: 1.55;
    }
    .preview-content table {
      width: 100%;
      border-collapse: collapse;
      margin: 1.6rem 0;
      border-radius: 10px;
      overflow: hidden;
    }
    .preview-content th, .preview-content td {
      border: 1px solid #ddd;
      padding: 0.9rem 1.2rem;
      text-align: left;
    }
    .preview-content th {
      background-color: #f8f9fa;
      font-weight: 600;
    }
    .dot-diagram-container {
      text-align: center;
      margin: 2rem 0;
      background: var(--dot-bg);
      padding: 25px;
      border-radius: 12px;
      border: 1px solid var(--dot-border);
      overflow: hidden;
      box-shadow: 0 3px 15px rgba(0,0,0,0.08);
      page-break-inside: avoid;
      break-inside: avoid;
    }
    .katex-display {
      margin: 1.4em 0 !important;
      overflow: auto hidden;
      padding: 0.6em 0;
      text-align: center;
    }
    .katex-display > .katex {
      display: inline-block;
      text-align: center;
      max-width: 100%;
    }
    .footer-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.8rem 1.8rem;
      font-size: 0.95rem;
      color: var(--text-secondary);
      border-top: 1px solid var(--border-color);
      background: var(--bg-toolbar);
      flex-shrink: 0;
      margin-top: 1rem;
    }
    #notification {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: white;
      color: #1a1f2b;
      padding: 16px 24px;
      border-radius: 14px;
      display: flex;
      align-items: center;
      gap: 14px;
      z-index: 2000;
      box-shadow: var(--notification-shadow);
      transform: translateX(450px);
      opacity: 0;
      transition: all 0.4s cubic-bezier(0.16,1,0.3,1);
      max-width: 400px;
      border-left: 5px solid var(--success-color);
    }
    #notification.show {
      transform: translateX(0);
      opacity: 1;
    }
    #notification.error { border-left-color: var(--error-color); background: #fff5f5; }
    #notification.warning { border-left-color: var(--warning-color); background: #fff9e6; }
    #notification i { font-size: 1.4rem; }
    .pdf-loader {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(10,12,20,0.85);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.4s;
      backdrop-filter: blur(5px);
    }
    .pdf-loader.active {
      opacity: 1;
      pointer-events: all;
    }
    .loader-content {
      background: var(--bg-panel);
      padding: 45px;
      border-radius: 22px;
      box-shadow: 0 18px 45px rgba(0,0,0,0.38);
      text-align: center;
      max-width: 420px;
      width: 92%;
      border: 1px solid var(--border-color);
    }
    .loader-spinner {
      position: relative;
      width: 80px;
      height: 80px;
      margin: 0 auto 28px;
    }
    .loader-spinner-inner {
      position: absolute;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      border: 5px solid var(--border-color);
      border-top-color: var(--accent-color);
      animation: spin 0.8s linear infinite;
      box-shadow: 0 0 18px rgba(77,157,224,0.5);
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    .loader-text {
      font-size: 24px;
      color: var(--text-primary);
      font-weight: 700;
      margin-top: 12px;
    }
    .loader-subtext {
      font-size: 16px;
      color: var(--text-secondary);
      margin-top: 10px;
    }
    @media (max-width: 1100px) {
      .content-area { flex-direction: column; }
      .preview-content { width: 95%; padding: 2rem 1.8rem; }
      .main-container { padding: 0.8rem; }
      .header { padding: 0.7rem 1.2rem; }
      .header-title { font-size: 1.25rem; }
    }
    @media (max-width: 768px) {
      .preview-content { width: 98%; padding: 1.8rem 1.5rem; font-size: 14.5px; }
      .editor { font-size: 14.5px; padding: 1.2rem; }
      .tool-btn { min-width: 75px; padding: 0.4rem 0.65rem; font-size: 0.85rem; }
      .download-btn { width: 100%; padding: 0.6rem; font-size: 1.05rem; }
      .preview-header { flex-direction: column; align-items: stretch; }
      .footer-container { flex-direction: column; gap: 10px; text-align: center; }
    }
    ::-webkit-scrollbar { width: 10px; height: 10px; }
    ::-webkit-scrollbar-track { background: var(--bg-primary); border-radius: 5px; }
    ::-webkit-scrollbar-thumb { 
      background: var(--border-color); 
      border-radius: 5px;
      border: 2px solid var(--bg-primary);
    }
    ::-webkit-scrollbar-thumb:hover { background: #5a6275; }
  </style>
</head>
<body>
  <div class="header">
    <div class="header-title">
      <i class="fas fa-file-pdf"></i> Markdown2PDF Pro
    </div>
    <div class="header-buttons">
      <button class="header-btn" id="infoBtn">
        <i class="fas fa-info-circle"></i> –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
      </button>
      <div class="theme-toggle-btn" id="themeToggle">
        <i class="fas fa-moon"></i>
      </div>
    </div>
  </div>

  <div class="main-container">
    <div class="content-area">
      <div class="panel">
        <div class="toolbar">
          <div class="toolbar-left">
            <button class="tool-btn" id="boldBtn"><i class="fas fa-bold"></i> –ñ–∏—Ä–Ω—ã–π</button>
            <button class="tool-btn" id="italicBtn"><i class="fas fa-italic"></i> –ö—É—Ä—Å–∏–≤</button>
            <button class="tool-btn" id="linkBtn"><i class="fas fa-link"></i> –°—Å—ã–ª–∫–∞</button>
            <button class="tool-btn" id="tableBtn"><i class="fas fa-table"></i> –¢–∞–±–ª–∏—Ü–∞</button>
            <button class="tool-btn danger" id="clearBtn"><i class="fas fa-trash-alt"></i> –û—á–∏—Å—Ç–∏—Ç—å</button>
          </div>
          <div class="toolbar-right">
            <button class="tool-btn" id="listBtn"><i class="fas fa-list"></i> –°–ø–∏—Å–æ–∫</button>
            <button class="tool-btn" id="codeBtn"><i class="fas fa-code"></i> –ö–æ–¥</button>
            <button class="tool-btn" id="quoteBtn"><i class="fas fa-quote-right"></i> –¶–∏—Ç–∞—Ç–∞</button>
            <button class="tool-btn" id="breakBtn"><i class="fas fa-scissors"></i> –†–∞–∑—Ä—ã–≤</button>
          </div>
        </div>
        <textarea class="editor" id="markdownEditor" placeholder="–ù–∞—á–Ω–∏—Ç–µ –ø–∏—Å–∞—Ç—å –≤–∞—à –¥–æ–∫—É–º–µ–Ω—Ç..."># –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Markdown2PDF Pro!

## üìê –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–æ—Ä–º—É–ª—ã

–ò–Ω–ª–∞–π–Ω —Ñ–æ—Ä–º—É–ª–∞: $E = mc^2$

–ë–ª–æ—á–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞:
$$
\int_{-\infty}^{\infty} e^{-x^2} dx = \sqrt{\pi}
$$

–°–∏—Å—Ç–µ–º–∞ —É—Ä–∞–≤–Ω–µ–Ω–∏–π:
$$
\begin{cases}
x + y = 5 \\ 
2x - y = 1
\end{cases}
$$

## üìä –¢–∞–±–ª–∏—Ü–∞

| –°–∏–Ω—Ç–∞–∫—Å–∏—Å | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|-----------|----------|--------|
| –ó–∞–≥–æ–ª–æ–≤–æ–∫ | –í–µ—Ä—Ö–Ω—è—è —Å—Ç—Ä–æ–∫–∞ | `# –ó–∞–≥–æ–ª–æ–≤–æ–∫` |
| –°–ø–∏—Å–æ–∫    | –ú–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π | `- –≠–ª–µ–º–µ–Ω—Ç` |
| –°—Å—ã–ª–∫–∞    | –ì–∏–ø–µ—Ä—Å—Å—ã–ª–∫–∞  | `[—Ç–µ–∫—Å—Ç](url)` |

## üí° –¶–∏—Ç–∞—Ç–∞

> "–õ—É—á—à–∏–π —Å–ø–æ—Å–æ–± –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç—å –±—É–¥—É—â–µ–µ ‚Äî –∏–∑–æ–±—Ä–µ—Å—Ç–∏ –µ–≥–æ."
> ‚Äî –ê–ª–∞–Ω –ö–µ–π

## üîó –°—Å—ã–ª–∫–∞

[GitHub –∞–≤—Ç–æ—Ä–∞](https://github.com/Aurum2347)

## üìÅ –ë–ª–æ–∫-—Å—Ö–µ–º–∞ DOT

```dot
digraph G {
  rankdir=LR;
  node [shape=rectangle, style=filled, fillcolor="#e3f2fd", color="#2c7be5"];
  Start [label="–ù–∞—á–∞–ª–æ", fillcolor="#bbdefb"];
  Process [label="–û–±—Ä–∞–±–æ—Ç–∫–∞"];
  Decision [shape=diamond, label="–£—Å–ª–æ–≤–∏–µ?", fillcolor="#e8f5e9"];
  Action1 [label="–î–µ–π—Å—Ç–≤–∏–µ 1", fillcolor="#e8f5e9"];
  Action2 [label="–î–µ–π—Å—Ç–≤–∏–µ 2", fillcolor="#fff3e0"];
  End [label="–ö–æ–Ω–µ—Ü", fillcolor="#ffcdd2"];
  
  Start -> Process;
  Process -> Decision;
  Decision -> Action1 [label="–î–∞"];
  Decision -> Action2 [label="–ù–µ—Ç"];
  Action1 -> End;
  Action2 -> End;
}
```

## üìÑ –†–∞–∑—Ä—ã–≤ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

–¢–µ–∫—Å—Ç –¥–æ —Ä–∞–∑—Ä—ã–≤–∞...

---

–¢–µ–∫—Å—Ç –ø–æ—Å–ª–µ —Ä–∞–∑—Ä—ã–≤–∞. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –º–Ω–æ–≥–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤!</textarea>
      </div>
      
      <div class="panel">
        <div class="preview-header">
          <div class="font-size-control">
            <label><i class="fas fa-text-height"></i> –†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞:</label>
            <select class="font-size-select" id="fontSizeSelect">
              <option value="13">13px</option>
              <option value="15" selected>15px</option>
              <option value="17">17px</option>
              <option value="19">19px</option>
            </select>
          </div>
          <div style="display:flex;align-items:center;gap:1rem;">
            <div class="document-input-group">
              <input type="text" id="documentName" value="document" maxlength="50">
              <div class="document-extension">.pdf</div>
            </div>
            <button class="download-btn" id="downloadPdf">
              <i class="fas fa-download"></i> –°–∫–∞—á–∞—Ç—å PDF
            </button>
          </div>
        </div>
        <div class="preview">
          <div class="preview-content" id="previewContent"></div>
        </div>
        <div class="footer-container">
          <div><span style="display:inline-block;width:10px;height:10px;background:#10b981;border-radius:50%;margin-right:8px;"></span> –ì–æ—Ç–æ–≤–æ –∫ —ç–∫—Å–ø–æ—Ä—Ç—É</div>
          <div><i class="fas fa-code"></i> By Aurum2347</div>
          <div>–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ–º</div>
        </div>
      </div>
    </div>
  </div>

  <div id="notification">
    <i class="fas fa-check-circle"></i>
    <span id="notificationText">–î–æ–∫—É–º–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω!</span>
    <button onclick="closeNotification()" style="background:none;border:none;color:#6c757d;font-size:1.3rem;cursor:pointer;margin-left:10px;">&times;</button>
  </div>

  <div class="pdf-loader" id="pdfLoader">
    <div class="loader-content">
      <div class="loader-spinner">
        <div class="loader-spinner-inner"></div>
      </div>
      <div class="loader-text">–ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF</div>
      <div class="loader-subtext">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ...</div>
    </div>
  </div>

  <!-- –ó–∞–≥—Ä—É–∑–∫–∞ –í–°–ï–• –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.11/dist/purify.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2pdf.js@0.10.1/dist/html2pdf.bundle.min.js"></script>
  <!-- Viz.js –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ DOT-–¥–∏–∞–≥—Ä–∞–º–º (—Ä–∞–±–æ—á–∞—è –≤–µ—Ä—Å–∏—è –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–¥–∞) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/viz.js/2.1.2/viz.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/viz.js/2.1.2/full.render.js"></script>
  
  <script>
    // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
    let editor = document.getElementById('markdownEditor');
    let preview = document.getElementById('previewContent');
    let themeToggle = document.getElementById('themeToggle');
    let fontSizeSelect = document.getElementById('fontSizeSelect');
    let documentNameInput = document.getElementById('documentName');
    let downloadBtn = document.getElementById('downloadPdf');
    let pdfLoader = document.getElementById('pdfLoader');
    let notification = document.getElementById('notification');
    let viz = null; // Viz.js instance for DOT diagrams
    let previewTimeout = null;
    let downloadCount = parseInt(localStorage.getItem('downloadCount') || '0');
    let totalChars = parseInt(localStorage.getItem('totalChars') || '0');
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Viz.js (—Ä–∞–±–æ—á–∞—è –≤–µ—Ä—Å–∏—è –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–¥–∞)
    function initViz() {
      try {
        viz = new Viz();
        console.log('‚úì Viz.js —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ DOT-–¥–∏–∞–≥—Ä–∞–º–º');
      } catch (e) {
        console.warn('‚ö† –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Viz.js:', e);
      }
    }
    
    // –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ–º—ã
    function loadTheme() {
      const savedTheme = localStorage.getItem('theme') || 'dark';
      document.documentElement.setAttribute('data-theme', savedTheme);
      updateThemeIcon(savedTheme);
    }
    
    function updateThemeIcon(theme) {
      const icon = themeToggle.querySelector('i');
      icon.className = theme === 'dark' ? 'fas fa-moon' : 'fas fa-sun';
    }
    
    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã
    themeToggle.addEventListener('click', () => {
      const current = document.documentElement.getAttribute('data-theme');
      const newTheme = current === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
      updateThemeIcon(newTheme);
      showNotification(newTheme === 'dark' ? '–¢—ë–º–Ω–∞—è —Ç–µ–º–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞' : '–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞');
      renderPreview();
    });
    
    // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞
    function renderPreview() {
      clearTimeout(previewTimeout);
      previewTimeout = setTimeout(() => {
        try {
          // –ü–∞—Ä—Å–∏–º Markdown
          const html = marked.parse(editor.value, {
            gfm: true,
            breaks: true,
            mangle: false,
            headerIds: false
          });
          
          // –û—á–∏—â–∞–µ–º HTML
          const clean = DOMPurify.sanitize(html, {
            USE_PROFILES: { html: true },
            ADD_TAGS: ['svg', 'g', 'path', 'circle', 'rect', 'polygon', 'polyline', 'line', 'ellipse', 'text', 'image'],
            ADD_ATTR: ['d', 'x', 'y', 'width', 'height', 'r', 'cx', 'cy', 'rx', 'ry', 'points', 'x1', 'y1', 'x2', 'y2', 'transform', 'fill', 'stroke', 'stroke-width', 'viewBox', 'xmlns', 'style', 'class', 'href']
          });
          
          preview.innerHTML = clean;
          
          // –†–µ–Ω–¥–µ—Ä–∏–º —Ñ–æ—Ä–º—É–ª—ã KaTeX
          renderMathInElement(preview, {
            delimiters: [
              {left: '$$', right: '$$', display: true},
              {left: '\\[', right: '\\]', display: true},
              {left: '$', right: '$', display: false},
              {left: '\\(', right: '\\)', display: false}
            ],
            throwOnError: false,
            errorColor: '#cc0000'
          });
          
          // –†–µ–Ω–¥–µ—Ä–∏–º –¥–∏–∞–≥—Ä–∞–º–º—ã (—Ä–∞–±–æ—á–∞—è –≤–µ—Ä—Å–∏—è –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–¥–∞)
          renderDiagrams();
          
          // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞
          preview.style.fontSize = fontSizeSelect.value + 'px';
          
          // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
          totalChars = editor.value.length;
          localStorage.setItem('totalChars', totalChars.toString());
          
        } catch (e) {
          console.error('–û—à–∏–±–∫–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞:', e);
          preview.innerHTML = `<p style="color:#ef4444;padding:20px;background:rgba(239,68,68,0.1);border-radius:8px;">
            <strong>–û—à–∏–±–∫–∞:</strong> ${e.message || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'}
          </p>`;
        }
      }, 250);
    }
    
    // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –¥–∏–∞–≥—Ä–∞–º–º (–ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∞—è –≤–µ—Ä—Å–∏—è –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–¥–∞)
    async function renderDiagrams() {
      if (!viz) {
        console.log('Viz.js –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –¥–∏–∞–≥—Ä–∞–º–º');
        return;
      }
      
      // –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ –±–ª–æ–∫–∏ –∫–æ–¥–∞ —Å –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏
      const codeBlocks = preview.querySelectorAll('pre > code, pre code');
      
      for (const block of codeBlocks) {
        const text = block.textContent.trim();
        
        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —ç—Ç–æ –¥–∏–∞–≥—Ä–∞–º–º–æ–π DOT
        if (text.startsWith('digraph') || text.startsWith('graph') || 
            (text.includes('->') && text.includes('{')) || 
            (text.includes('--') && text.includes('{'))) {
          
          const container = block.parentElement;
          const diagramContainer = document.createElement('div');
          diagramContainer.className = 'dot-diagram-container';
          
          try {
            // –†–µ–Ω–¥–µ—Ä–∏–º —á–µ—Ä–µ–∑ Viz.js (—Ä–∞–±–æ—á–∞—è –≤–µ—Ä—Å–∏—è)
            const svg = await viz.renderSVGElement(text);
            diagramContainer.innerHTML = '';
            svg.style.maxWidth = '100%';
            svg.style.height = 'auto';
            svg.style.display = 'block';
            svg.style.margin = '0 auto';
            diagramContainer.appendChild(svg);
            
            // –°—Ç–∏–ª–∏–∑—É–µ–º —É–∑–ª—ã
            svg.querySelectorAll('ellipse, polygon, rect').forEach(node => {
              node.style.stroke = '#2c7be5';
              node.style.strokeWidth = '1.8';
              if (!node.style.fill || ['#ffffff','white','#fff'].includes(node.style.fill.toLowerCase())) {
                node.style.fill = '#e3f2fd';
              }
            });
          } catch (e) {
            console.error('–û—à–∏–±–∫–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –¥–∏–∞–≥—Ä–∞–º–º—ã:', e);
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–¥ –∫–∞–∫ –∑–∞–ø–∞—Å–Ω–æ–π –≤–∞—Ä–∏–∞–Ω—Ç
            diagramContainer.innerHTML = `<div style="padding:20px;color:#ef4444;">
              <strong>–û—à–∏–±–∫–∞ –¥–∏–∞–≥—Ä–∞–º–º—ã:</strong> ${e.message}
              <pre style="margin-top:10px;background:rgba(0,0,0,0.05);padding:10px;border-radius:4px;font-size:13px;">${escapeHtml(text)}</pre>
            </div>`;
          }
          
          // –ó–∞–º–µ–Ω—è–µ–º –±–ª–æ–∫ –∫–æ–¥–∞ –Ω–∞ –¥–∏–∞–≥—Ä–∞–º–º—É
          if (container && container.parentNode) {
            container.parentNode.replaceChild(diagramContainer, container);
          }
        }
      }
    }
    
    function escapeHtml(text) {
      return text
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;")
        .replace(/"/g, "&quot;")
        .replace(/'/g, "&#039;");
    }
    
    // –≠–∫—Å–ø–æ—Ä—Ç –≤ PDF (–ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∞—è –≤–µ—Ä—Å–∏—è –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–¥–∞ —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏)
    async function exportPDF() {
      const rawName = documentNameInput.value.trim();
      const filename = rawName.replace(/[<>:"/\\|?*]/g, '_').substring(0, 50) || 'document';
      
      if (!editor.value.trim()) {
        showNotification('–ù–µ–ª—å–∑—è —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—É—Å—Ç–æ–π –¥–æ–∫—É–º–µ–Ω—Ç', 'error');
        return;
      }
      
      pdfLoader.classList.add('active');
      
      try {
        // –°–æ–∑–¥–∞—ë–º –∫–ª–æ–Ω –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Å—Ç–∏–ª—è–º–∏ (–∫–∞–∫ –≤ —Å—Ç–∞—Ä–æ–º –∫–æ–¥–µ)
        const clone = preview.cloneNode(true);
        clone.style.width = '210mm'; // A4 width in mm
        clone.style.padding = '25mm 20mm';
        clone.style.margin = '0 auto';
        clone.style.boxSizing = 'border-box';
        clone.style.fontSize = `${fontSizeSelect.value}px`;
        clone.style.color = '#000';
        clone.style.background = 'white';
        clone.style.boxShadow = 'none';
        clone.style.minHeight = '297mm'; // A4 height
        
        // –£–±–∏—Ä–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã, –º–µ—à–∞—é—â–∏–µ –ø–µ—á–∞—Ç–∏
        clone.querySelectorAll('.dot-diagram-title, .dot-note, .status-dot, .footer-slogan').forEach(el => {
          if (el.parentNode) el.parentNode.removeChild(el);
        });
        
        // –£–ª—É—á—à–∞–µ–º —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –ø–µ—á–∞—Ç–∏
        clone.querySelectorAll('table').forEach(table => {
          table.style.width = '100%';
          table.style.borderCollapse = 'collapse';
          table.querySelectorAll('th, td').forEach(cell => {
            cell.style.border = '1px solid #ddd';
            cell.style.padding = '8px';
          });
        });
        
        // –í—Ä–µ–º–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—ä—è–≤–ª–µ–Ω –∏ —É–¥–∞–ª–µ–Ω)
        const tempDiv = document.createElement('div');
        tempDiv.style.position = 'fixed';
        tempDiv.style.left = '0';
        tempDiv.style.top = '0';
        tempDiv.style.width = '210mm';
        tempDiv.style.margin = '0 auto';
        tempDiv.appendChild(clone);
        document.body.appendChild(tempDiv);
        
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞ (—Ä–∞–±–æ—á–∞—è –≤–µ—Ä—Å–∏—è –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–¥–∞)
        const options = {
          margin: [15, 10, 15, 10], // [top, right, bottom, left] in mm
          filename: `${filename}.pdf`,
          image: { type: 'jpeg', quality: 0.98 },
          html2canvas: { 
            scale: 2,
            useCORS: true,
            logging: false,
            backgroundColor: '#ffffff',
            scrollY: -window.scrollY,
            windowWidth: 800,
            windowHeight: clone.offsetHeight
          },
          jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
        };
        
        // –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º
        await html2pdf().set(options).from(clone).save();
        
        // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
        downloadCount++;
        localStorage.setItem('downloadCount', downloadCount.toString());
        
        showNotification(`–î–æ–∫—É–º–µ–Ω—Ç "${filename}.pdf" —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω—ë–Ω!`);
        
      } catch (error) {
        console.error('–û—à–∏–±–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ PDF:', error);
        showNotification(`–û—à–∏–±–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞: ${error.message || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'}`, 'error');
      } finally {
        // –û—á–∏—â–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ)
        if (tempDiv && tempDiv.parentNode) {
          tempDiv.parentNode.removeChild(tempDiv);
        }
        pdfLoader.classList.remove('active');
      }
    }
    
    // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    function showNotification(message, type = 'success') {
      const icon = notification.querySelector('i');
      notification.querySelector('#notificationText').textContent = message;
      
      notification.className = 'show';
      notification.style.borderLeftColor = type === 'error' ? 'var(--error-color)' : 'var(--success-color)';
      
      if (type === 'error') {
        icon.className = 'fas fa-exclamation-circle';
        icon.style.color = 'var(--error-color)';
      } else {
        icon.className = 'fas fa-check-circle';
        icon.style.color = 'var(--success-color)';
      }
      
      // –ê–≤—Ç–æ—Å–∫—Ä—ã—Ç–∏–µ
      setTimeout(() => {
        notification.classList.remove('show');
      }, type === 'error' ? 6000 : 4000);
    }
    
    function closeNotification() {
      notification.classList.remove('show');
    }
    
    // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
    function applyFormat(type) {
      const start = editor.selectionStart;
      const end = editor.selectionEnd;
      const selected = editor.value.substring(start, end);
      let newText = '';
      
      switch(type) {
        case 'bold': newText = selected ? `**${selected}**` : `**–∂–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç**`; break;
        case 'italic': newText = selected ? `*${selected}*` : `*–∫—É—Ä—Å–∏–≤*`; break;
        case 'link': newText = selected ? `[${selected}](https://example.com)` : `[—Å—Å—ã–ª–∫–∞](https://example.com)`; break;
        case 'list': newText = selected ? selected.split('\n').map(l => `- ${l}`).join('\n') : `- –ü—É–Ω–∫—Ç 1\n- –ü—É–Ω–∫—Ç 2`; break;
        case 'code': newText = selected ? `\`\`\`\n${selected}\n\`\`\`` : `\`\`\`\n–∫–æ–¥\n\`\`\``; break;
        case 'quote': newText = selected ? selected.split('\n').map(l => `> ${l}`).join('\n') : `> —Ü–∏—Ç–∞—Ç–∞`; break;
        case 'pageBreak': newText = '\n---\n'; break;
      }
      
      editor.value = editor.value.substring(0, start) + newText + editor.value.substring(end);
      editor.focus();
      renderPreview();
    }
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫
    document.getElementById('boldBtn').addEventListener('click', () => applyFormat('bold'));
    document.getElementById('italicBtn').addEventListener('click', () => applyFormat('italic'));
    document.getElementById('linkBtn').addEventListener('click', () => applyFormat('link'));
    document.getElementById('listBtn').addEventListener('click', () => applyFormat('list'));
    document.getElementById('codeBtn').addEventListener('click', () => applyFormat('code'));
    document.getElementById('quoteBtn').addEventListener('click', () => applyFormat('quote'));
    document.getElementById('breakBtn').addEventListener('click', () => applyFormat('pageBreak'));
    document.getElementById('tableBtn').addEventListener('click', () => {
      const table = `| –ó–∞–≥–æ–ª–æ–≤–æ–∫ 1 | –ó–∞–≥–æ–ª–æ–≤–æ–∫ 2 |\n|-------------|-------------|\n| –Ø—á–µ–π–∫–∞ 1    | –Ø—á–µ–π–∫–∞ 2    |`;
      const start = editor.selectionStart;
      const prefix = editor.value.trim() ? '\n\n' : '';
      editor.value = editor.value.substring(0, start) + prefix + table + editor.value.substring(start);
      editor.focus();
      renderPreview();
      showNotification('–¢–∞–±–ª–∏—Ü–∞ –≤—Å—Ç–∞–≤–ª–µ–Ω–∞');
    });
    document.getElementById('clearBtn').addEventListener('click', () => {
      if (confirm('–û—á–∏—Å—Ç–∏—Ç—å –≤–µ—Å—å –¥–æ–∫—É–º–µ–Ω—Ç?')) {
        editor.value = `# –ù–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç\n\n–ù–∞—á–Ω–∏—Ç–µ –ø–∏—Å–∞—Ç—å –∑–¥–µ—Å—å...\n\n## –§–æ—Ä–º—É–ª–∞\n$$\n\\int_{-\\infty}^{\\infty} e^{-x^2} dx = \\sqrt{\\pi}\n$$\n\n## –î–∏–∞–≥—Ä–∞–º–º–∞\n\`\`\`dot\ndigraph G {\n  A -> B;\n  B -> C;\n}\n\`\`\``;
        renderPreview();
        showNotification('–î–æ–∫—É–º–µ–Ω—Ç –æ—á–∏—â–µ–Ω');
      }
    });
    document.getElementById('infoBtn').addEventListener('click', () => {
      alert(`Markdown2PDF Pro\n\n‚Ä¢ –§–æ—Ä–º—É–ª—ã LaTeX —á–µ—Ä–µ–∑ KaTeX (—Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ä–∞–∑—É)\n‚Ä¢ –î–∏–∞–≥—Ä–∞–º–º—ã Graphviz —á–µ—Ä–µ–∑ Viz.js (—Ä–∞–±–æ—Ç–∞–µ—Ç –≤–µ–∑–¥–µ!)\n‚Ä¢ –≠–∫—Å–ø–æ—Ä—Ç –≤ PDF –±–µ–∑ –æ–±—Ä—ã–≤–æ–≤ —Ç–µ–∫—Å—Ç–∞\n‚Ä¢ –°–≤–µ—Ç–ª–∞—è/—Ç—ë–º–Ω–∞—è —Ç–µ–º–∞\n‚Ä¢ –í—Å–µ –¥–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ`);
    });
    downloadBtn.addEventListener('click', exportPDF);
    fontSizeSelect.addEventListener('change', renderPreview);
    documentNameInput.addEventListener('input', (e) => {
      e.target.value = e.target.value.replace(/[<>:"/\\|?*]/g, '_').substring(0, 50) || 'document';
    });
    
    // –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏
    document.addEventListener('keydown', (e) => {
      if ((e.ctrlKey || e.metaKey) && e.key === 's') {
        e.preventDefault();
        exportPDF();
      } else if ((e.ctrlKey || e.metaKey) && e.key === 'b') {
        e.preventDefault();
        applyFormat('bold');
      } else if ((e.ctrlKey || e.metaKey) && e.key === 'i') {
        e.preventDefault();
        applyFormat('italic');
      }
    });
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    document.addEventListener('DOMContentLoaded', () => {
      loadTheme();
      editor.addEventListener('input', renderPreview);
      
      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º Viz.js –¥–ª—è –¥–∏–∞–≥—Ä–∞–º–º (—Ä–∞–±–æ—á–∞—è –≤–µ—Ä—Å–∏—è)
      initViz();
      
      // –ü–µ—Ä–≤–∏—á–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä
      renderPreview();
      
      // –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
      setTimeout(() => {
        showNotification('–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –ù–∞–∂–º–∏—Ç–µ Ctrl+S –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ PDF.');
      }, 800);
    });
  </script>
</body>
</html>
